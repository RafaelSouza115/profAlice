<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Proferssora alice</title>
  </head>

  <body>
    <h1></h1>
    Insira o nome do aluno: <input type="text" id="ipt_nome" />
    <div id="divNome"></div>

    Insira a primeira nota: <input type="number" id="ipt_n1" />
    <div id="divN1"></div>

    Insira a segunda nota: <input type="number" id="ipt_n2" />
    <div id="divN2"></div>

    Insira a terceira nota: <input type="number" id="ipt_n3" />
    <div id="divN3"></div>

    <button onclick="Cadastrar()">Cadastrar aluno</button>
    <div id="divmsg"></div>
    <br />
    <button onclick="listar()">Listar alunos</button>
    <div id="divlistar"></div>
    <br />
    <button onclick="media()">média</button>
    <div id="divmedia"></div>
    <br />
  </body>
  <script>
    var alunos = [];

    function Cadastrar() {
      let nome_aluno = ipt_nome.value;
      let n1 = Number(ipt_n1.value);
      let n2 = Number(ipt_n2.value);
      let n3 = Number(ipt_n3.value);
      let media = (n1 + n2 + n3) / 3;

      divN1.innerHTML = "";
      divN2.innerHTML = "";
      divN3.innerHTML = "";
      divNome.innerHTML = "";

      let erro = 0;
      if (nome_aluno.length < 3) {
        divNome.innerHTML = `O nome dever ter no minimo 9 caracteres`;
        console.log("erro nos caracteres");
        erro++;
      }

      for (let i = 0; i < alunos.length; i++) {
        if (nome_aluno == alunos[i]) {
          console.log("erro ao cadastrar");
          divNome.innerHTML = `O aluno ${nome_aluno} ja esta cadastrado`;
          divmsg.innerHTML = "";
          erro++;
        }
      }

      if ((n1 < 0 && n1 > 10) || ipt_n1.value == "") {
        erro++;
        divN1.innerHTML = `A nota tem que ser maior ou igual a 0 e menor ou igual a 10.`;
        console.log("erro na nota 1");
      }

      if ((n2 < 0 && n2 > 10) || ipt_n2.value == "") {
        erro++;
        divN2.innerHTML = `A nota tem que ser maior ou igual a 0 e menor ou igual a 10.`;
        console.log("erro na nota 2");
      }

      if ((n3 < 0 && n3 > 10) || ipt_n3.value == "") {
        erro++;
        divN3.innerHTML = `A nota tem que ser maior ou igual a 0 e menor ou igual a 10.`;
        console.log("erro na nota 3");
      }

      if (erro == 0) {
        alunos.push({
          nome: ipt_nome.value,
          n1: Number(ipt_n1.value),
          n2: Number(ipt_n2.value),
          n3: Number(ipt_n3.value),
          media: media,
        });
        alert("tudo certo");
        console.log(alunos);
      }
    }

    function listar() {
      let ordem = prompt(
        "Voce deseja listas os nomes dos ultimos cadastrados(1) ou dos primeiros(2)?"
      );
      divlistar.innerHTML = "";
      if (ordem == 1) {
        for (let i = 0; i < alunos.length; i++) {
          divlistar.innerHTML += `Aluno: ${alunos[i].nome} – N1: ${alunos[i].n1} – N2: ${alunos[i].n2} – N3: ${alunos[i].n3} – Média: ${alunos[i].media}<br>`;
        }
      } else {
        for (let i = alunos.length - 1; i > -1; i--) {
          divlistar.innerHTML += `Aluno: ${alunos[i].nome} – N1: ${alunos[i].n1} – N2: ${alunos[i].n2} – N3: ${alunos[i].n3} – Média: ${alunos[i].media}<br>`;
        }
      }
    }

    function media() {
      let ordem = prompt("Voce deseja as médias Maiores(1) ou as menores(2)?");

      divmedia.innerHTML = "";
      let maior = 0;
      let menor = 0;
        let id = 0
      if (ordem == 1) {
        for (let i = 0; i < alunos.length; i++) {
          if (alunos[i].media > maior) {
            id = i
            maior = alunos[i].media;
          }

          divmedia.innerHTML = `Aluno: ${alunos[id].nome} – N1: ${alunos[id].n1} – N2: ${alunos[id].n2} – N3: ${alunos[id].n3} – Média: ${maior}<br>`;
        }
      } else {
        for (let i = 0; i < alunos.length; i++) {
          if (alunos[i].media > maior) {
            id = i
            maior = alunos[i].media;
          }
        }
        menor = maior
        for (let i = 0; i < alunos.length; i++) {
          if (alunos[i].media < menor) {
            id = i
            menor = alunos[i].media;
          }

          divmedia.innerHTML = `Aluno: ${alunos[id].nome} – N1: ${alunos[id].n1} – N2: ${alunos[id].n2} – N3: ${alunos[id].n3} – Média: ${menor}<br>`;
        }
      }
    }
  </script>
</html>
